function drawYear(b,p,c,a,m){var d=b.getContext("2d");var l=6,g=l*3,k=2;b.width=31*l;b.height=12*l+g+k;d.fillStyle="black";d.fillRect(0,0,b.width,b.height);d.fillStyle="white";d.font=g+'px "Lucida Console", Monaco, monospace';d.textBaseline="top";d.fillText(p,0,0);for(var j=0;j<12;j++){for(var f=1,e=new Date(p,j,f);e.getMonth()===j;e=new Date(p,j,++f)){var n=(f-1)*l;var o=j*l+g+k;if(e>=a&&e<=m){d.fillRect(n,o,l/2,l/2)}else{if(e>=c&&e<a){for(var h=0;h<l/2;h++){d.fillRect(n+h,o+h,1,1)}}else{d.fillRect(n,o,1,1)}}}}}function draw(b){var f=276.5*24*60*60*1000;var d=new Date(b-f);var i=new Date();var e=Math.floor(d.getFullYear()/5)*5-5;var g=Math.ceil((i.getFullYear()+1)/5)*5+4;var a=i.getFullYear()-b.getFullYear()-1;if(i.getMonth()>b.getMonth()||(i.getMonth()===b.getMonth()&&i.getDate()>=b.getDate())){a++}$("#age").text("Number of Days Living at Age "+a);var h=$("#life").empty();for(var j=e;j<=g;j++){var c=$("<canvas/>");h.append(c);drawYear(c[0],j,d,b,i)}}$(document).ready(function(){var e=location.search.match(/\?(\d+)-(\d+)-(\d+)/);if(e===null){var d=$("form .year");var h=new Date().getFullYear();for(var i=h-115;i<=h;i++){var c=$("<option>"+i+"</option>",{value:i});d.append(c)}d.val(1985);var b=$("form .month");for(var g=1;g<=12;g++){c=$("<option>"+g+"</option>",{value:g});b.append(c)}var a=$("form .day");for(var f=1;f<=31;f++){c=$("<option>"+f+"</option>",{value:f});a.append(c)}$("form").submit(function(){var l=$("form .year").val();var k=$("form .month").val();var j=$("form .day").val();window.location="?"+l+"-"+k+"-"+j;return false})}else{$("form").remove();draw(new Date(e[1],e[2]-1,e[3]))}});